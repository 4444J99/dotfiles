# ─────────────────────────────────────────────────────────────────────────────
# Kitty Terminal Configuration - Managed by Chezmoi
# Theme: Tokyo Night
# ─────────────────────────────────────────────────────────────────────────────

# ─────────────────────────────────────────────────────────────────────────────
# Fonts
# ─────────────────────────────────────────────────────────────────────────────

font_family      JetBrainsMono Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        14.0

# Enable ligatures
disable_ligatures never

# Adjust line height for better readability
adjust_line_height 110%

# ─────────────────────────────────────────────────────────────────────────────
# Cursor
# ─────────────────────────────────────────────────────────────────────────────

cursor_shape          block
cursor_blink_interval 0
cursor_stop_blinking_after 0
shell_integration     enabled

# ─────────────────────────────────────────────────────────────────────────────
# Scrollback
# ─────────────────────────────────────────────────────────────────────────────

scrollback_lines 10000
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER

# ─────────────────────────────────────────────────────────────────────────────
# Mouse
# ─────────────────────────────────────────────────────────────────────────────

mouse_hide_wait      3.0
copy_on_select       clipboard
strip_trailing_spaces smart

# ─────────────────────────────────────────────────────────────────────────────
# Window Layout
# ─────────────────────────────────────────────────────────────────────────────

window_padding_width  8
placement_strategy    center
hide_window_decorations titlebar-only
confirm_os_window_close 0

# Window borders
active_border_color   #7aa2f7
inactive_border_color #292e42
bell_border_color     #e0af68

# ─────────────────────────────────────────────────────────────────────────────
# Tab Bar
# ─────────────────────────────────────────────────────────────────────────────

tab_bar_style         powerline
tab_powerline_style   slanted
tab_bar_min_tabs      1
tab_title_template    " {index}: {title} "

active_tab_foreground   #1a1b26
active_tab_background   #7aa2f7
active_tab_font_style   bold
inactive_tab_foreground #c0caf5
inactive_tab_background #292e42
inactive_tab_font_style normal
tab_bar_background      #1a1b26

# ─────────────────────────────────────────────────────────────────────────────
# Tokyo Night Color Scheme
# ─────────────────────────────────────────────────────────────────────────────

# Background and foreground
foreground #c0caf5
background #1a1b26
background_opacity 1.0

# Selection
selection_foreground #c0caf5
selection_background #33467c

# Cursor colors
cursor            #c0caf5
cursor_text_color #1a1b26

# URL underline color
url_color #73daca

# The 16 terminal colors
# Black
color0  #15161e
color8  #414868
# Red
color1  #f7768e
color9  #f7768e
# Green
color2  #9ece6a
color10 #9ece6a
# Yellow
color3  #e0af68
color11 #e0af68
# Blue
color4  #7aa2f7
color12 #7aa2f7
# Magenta
color5  #bb9af7
color13 #bb9af7
# Cyan
color6  #7dcfff
color14 #7dcfff
# White
color7  #a9b1d6
color15 #c0caf5

# Extended colors for apps that use 256 colors
mark1_foreground #1a1b26
mark1_background #7aa2f7

# ─────────────────────────────────────────────────────────────────────────────
# macOS Specific
# ─────────────────────────────────────────────────────────────────────────────

macos_option_as_alt        yes
macos_quit_when_last_window_closed yes
macos_titlebar_color       #1a1b26
macos_thicken_font         0.25

# ─────────────────────────────────────────────────────────────────────────────
# Bell
# ─────────────────────────────────────────────────────────────────────────────

enable_audio_bell    no
visual_bell_duration 0.0
window_alert_on_bell yes

# ─────────────────────────────────────────────────────────────────────────────
# Performance
# ─────────────────────────────────────────────────────────────────────────────

repaint_delay   10
input_delay     3
sync_to_monitor yes

# ─────────────────────────────────────────────────────────────────────────────
# Remote Control
# ─────────────────────────────────────────────────────────────────────────────

allow_remote_control socket-only
listen_on            unix:/tmp/kitty

# ─────────────────────────────────────────────────────────────────────────────
# Key Bindings - macOS Native Feel
# ─────────────────────────────────────────────────────────────────────────────

# Clear default shortcuts we'll override
clear_all_shortcuts no

# Clipboard (use macOS native)
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard

# Tabs
map cmd+t     new_tab_with_cwd
map cmd+w     close_tab
map cmd+1     goto_tab 1
map cmd+2     goto_tab 2
map cmd+3     goto_tab 3
map cmd+4     goto_tab 4
map cmd+5     goto_tab 5
map cmd+6     goto_tab 6
map cmd+7     goto_tab 7
map cmd+8     goto_tab 8
map cmd+9     goto_tab 9
map cmd+]     next_tab
map cmd+[     previous_tab
map cmd+shift+] move_tab_forward
map cmd+shift+[ move_tab_backward

# Splits/Windows
map cmd+d       launch --location=vsplit --cwd=current
map cmd+shift+d launch --location=hsplit --cwd=current
map cmd+shift+w close_window

# Navigate windows (vim-style with Cmd)
map cmd+h neighboring_window left
map cmd+j neighboring_window down
map cmd+k neighboring_window up
map cmd+l neighboring_window right

# Resize windows
map cmd+ctrl+h resize_window narrower 3
map cmd+ctrl+l resize_window wider 3
map cmd+ctrl+k resize_window taller 3
map cmd+ctrl+j resize_window shorter 3
map cmd+ctrl+0 resize_window reset

# Scrollback
map cmd+f     show_scrollback
map cmd+shift+f launch --stdin-source=@screen_scrollback --stdin-add-formatting --type=overlay less +G -R

# Font size
map cmd+plus  change_font_size all +1.0
map cmd+minus change_font_size all -1.0
map cmd+0     change_font_size all 0

# Fullscreen
map cmd+enter toggle_fullscreen

# Clear screen
map cmd+shift+k clear_terminal scrollback active

# New OS window
map cmd+n new_os_window_with_cwd

# Reload config
map cmd+shift+r load_config_file

# ─────────────────────────────────────────────────────────────────────────────
# pywal Dynamic Colors (optional)
# ─────────────────────────────────────────────────────────────────────────────

# Include pywal colors if generated (run 'theme-switch ~/image.jpg')
include ~/.cache/wal/colors-kitty.conf

# ─────────────────────────────────────────────────────────────────────────────
# Includes (optional local overrides)
# ─────────────────────────────────────────────────────────────────────────────

# Include local overrides if they exist
include kitty.local.conf
